# Отчет по лабораторной работе
## 1 задание - Работа с датами и промежуточными метками 
1. Открываем терминал и создаем лог-файл с помощью команды ``echo -e "2024-12-01 12:30:45 ERROR user1 login failed\n2024-12-01 12:31:00 INFO user1 login successful\n2024-12-01 12:36:30 ERROR user2 login failed\n2024-12-01 12:40:00 INFO user2 login successful" > logs.txt``
   
   ``echo`` - команда для вывода текста в терминал \
   ``-e`` - флаг, который позволяет интерпретировать управляющие символы (например, ``\n`` для новой строки, ``\t`` для табуляции) \
   ``Текст внутри кавычек`` - передаются строки, которые должны быть записаны в файл \
   ``> logs.txt`` - оператор ``>`` перенаправляет вывод команды в файл ( то есть строки из команды ``echo`` будут записаны в файл ``logs.txt``)

2. Для того чтобы найти все строки с ошибками ``ERROR`` вводим команду ``grep "ERROR" logs.txt``


   ``grep`` - это утилита для поиска строк, которые содержат заданный шаблон (или регулярное выражение), в одном или нескольких файлах (она выводит все строки, которые соответствуют шаблону) \
   ``ERROR`` - это строка, которую мы ищем в файле (важно, что ``grep`` по умолчанию чувствителен к регистру, т.е. он будет искать ERROR в том виде, в котором оно написано, и не будет учитывать другие варианты, такие как error или Error). \
   ``logs.txt`` - это имя файла, в котором будет производиться поиск
   
   <img width="567" alt="Снимок экрана 2024-12-15 в 15 31 06" src="https://github.com/user-attachments/assets/201c4d4d-cc6d-4cfa-8abb-85a4e538411b" />

4. Найдем все события, произошедшие в интервале между ``12:30`` и ``12:35`` - команда ``grep -E "2024-12-01 12:(3[0-5]):[0-9]{2}" logs.txt``

   ``-E`` - флаг, который включает расширенные регулярные выражения. Это даёт возможность использовать более мощные и гибкие шаблоны поиска \
   ``2024-12-01`` - это точное совпадение с датой 2024-12-01 \
   ``12`` — фиксированное совпадение с часом 12 \
   ``(3[0-5])`` - это выражение ищет минуты, которые могут быть в пределах от 30 до 35. То есть, только строки с такими минутами будут найдены \
   ``[0-9]{2}`` - это выражение находит любые две цифры (секунды), например 00, 01, 59 и т.д.
   
   <img width="566" alt="Снимок экрана 2024-12-15 в 15 37 06" src="https://github.com/user-attachments/assets/d281ad12-cf9a-42c0-8b8b-10e6f7a37817" />

## 2 задание - Анализ логов веб-сервера с использованием grep и регулярных выражений
1. Создаем файл ``server_logs.txt`` 

   <img width="605" alt="Снимок экрана 2024-12-16 в 16 19 55" src="https://github.com/user-attachments/assets/0f112270-989d-47cd-876f-783c3ec9aaaa" /> \
   ``cat > server_logs.txt << EOF``: Это команда создает файл с именем ``server_logs.txt`` и записывает в него все данные, которые следуют до строки ``EOF``:
   
   ``cat``: Это стандартная команда для вывода текста в терминал. В данном случае используется с перенаправлением ``>`` для записи в файл

   ``>``: Оператор перенаправления, который создаёт новый файл

   ``<< EOF``: Это часть так называемого ``here document``, которая позволяет вводить несколько строк текста прямо в командной строке. Все строки, введённые до появления ``EOF``, будут записаны в файл ``server_logs.txt``

   ``EOF`` — это метка, которая определяет конец ввода данных. Всё, что вы вводите между начальным ``<< EOF`` и завершающим ``EOF``, будет записано в файл.

2. Найдем все запросы от IР-адреса ``192.168.1.1`` c помощью команды ``grep "^192.168.1.1" server_logs.txt``:

   ``grep`` - это команда для поиска строк, которые соответствуют заданному шаблону, в одном или нескольких файлах

   ``^ ``— символ каретки, который в регулярных выражениях обозначает начало строки. То есть ``^192.168.1.1`` ищет строки, которые начинаются с указанного шаблона (в данном случае с IP-адреса 192.168.1.1).

   ``192.168.1.1`` — это сам шаблон поиска. В данном случае это IP-адрес

   ``server_logs.txt`` - это имя файла, в котором будет выполнен поиск
   
   <img width="593" alt="Снимок экрана 2024-12-16 в 16 20 19" src="https://github.com/user-attachments/assets/af15ff14-8cae-48b3-b779-343a2ae34726" />

3.Подсчитаем количество строк с ошибками 404 и 500 и выведем эти запросы: команда - ``grep -E " 404 | 500 " server_logs.txt | tee /dev/tty | wo -l``

   ``grep -E " 404 | 500 "``: Ищет строки с ошибками 404 или 500
   
   ``tee /dev/tty``: Выводит строки на экран (в терминал), так что мы увидим сами запросы
   
   ``wc -l``: Подсчитывает количество строк с ошибками 404 или 500

   <img width="627" alt="Снимок экрана 2024-12-16 в 16 21 43" src="https://github.com/user-attachments/assets/175d7a41-71e1-4001-887c-ff6401876926" />

4. Извлечем только IP-адреса, игнорируя остальные части строки с помощью команды grep ``-o "^[^ ]*" server_logs.txt``

   Флаг ``-o`` заставит grep выводить только совпавшую часть строки — в данном случае, только IP-адрес

   ``^[^ ]*``: Это регулярное выражение, которое находит все символы в начале строки до первого пробела (то есть, IP-адрес)

   <img width="428" alt="Снимок экрана 2024-12-16 в 16 22 45" src="https://github.com/user-attachments/assets/18b5ba0a-25a3-4d1a-82be-846a18d6c191" />

5. Найдем все запросы, сделанные в промежутке между ``10:00`` и ``10:05`` (включая только код ошибки ``404``):

   команда: ``grep -Е "\[12/Dec/2024:10:(00|01|02|03|04|05)" server_logs.txt | grep " 404 "``

   В первой части регулярного выражения ищем временные метки, начинающиеся с ``12/Dec/2024: 10:00``, ``10:01`` и так далее до ``10:05``.

   Во второй части фильтруем только те строки, где код ответа — ``404``.

   <img width="749" alt="Снимок экрана 2024-12-16 в 16 24 22" src="https://github.com/user-attachments/assets/13429ea7-8292-457d-94b5-162e3725baa2" />

6. Подсчитаем количество уникальных IP-адресов, которые сделали GET-запросы на страницы ``.html``:

   команда: ``grep -E '"GET .+\.html HTTP' server_logs.txt | cut -d ' ' -f 1 | sort | uniq | wc -l``

   ``-E`` - это флаг, который включает расширенные регулярные выражения (Extended Regular Expressions). Он позволяет использовать более сложные регулярные выражения, чем стандартные.

   ``"GET`` - ищем строку, которая начинается с GET (обычно используется для HTTP-запросов).
   
   ``.+"`` - символ ``.`` соответствует любому символу, а ``+`` означает, что символов может быть один или больше (то есть, это позволяет захватить весь путь запроса, например, /index.html или /about.html).

   ``\\.html`` - часть выражения ищет строки, которые заканчиваются на ``.html``.

   ``HTTP`` - ищем строки, которые заканчиваются на HTTP, что обычно указывает на завершение HTTP-запроса.

   ``cut`` - это команда для извлечения частей строки, разделённой на колонки.

   ``-d ' '`` - флаг ``-d`` задаёт разделитель, в данном случае это пробел. То есть команда будет разбивать каждую строку по пробелам и извлекать нужные части.

   ``-f 1`` - флаг указывает, что мы хотим извлечь первую колонку (первый столбец, который в логе соответствует IP-адресу).

   Команда ``sort`` сортирует строки в алфавитном порядке.

   Команда ``uniq`` удаляет повторяющиеся строки и выводит только уникальные.

   Команда ``wc -l`` считает количество строк. В данном контексте она подсчитывает количество уникальных IP-адресов.

   <img width="799" alt="Снимок экрана 2024-12-16 в 16 28 01" src="https://github.com/user-attachments/assets/ce7710d9-42f2-4dec-932d-2cd42778607c" />


